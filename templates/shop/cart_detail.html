{% extends 'shop/base.html' %}

{% block title %}עגלת קניות - לבשמעא{% endblock %}

{% block content %}
<h2>עגלת הקניות שלי</h2>

{% if cart_items %}
    <div style="background: white; border-radius: 8px; overflow: hidden;">
        {% for item in cart_items %}
        <div style="display: grid; grid-template-columns: 100px 1fr auto auto auto; gap: 15px; padding: 20px; border-bottom: 1px solid #eee; align-items: center;">
            <div>
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 4px;">
                {% else %}
                    <div style="width: 80px; height: 80px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #666;">אין תמונה</div>
                {% endif %}
            </div>
            
            <div>
                <h4 style="margin: 0 0 5px 0;">{{ item.product.name }}</h4>
                <p style="color: #666; margin: 0;">₪{{ item.product.price }} ליחידה</p>
            </div>
            
            <div>
                <form method="post" action="{% url 'shop:update_cart_quantity' item.id %}" style="display: inline-block;">
                    {% csrf_token %}
                    <input type="number" name="quantity" value="{{ item.quantity }}" min="0" max="{{ item.product.stock }}" style="width: 60px; padding: 5px;" onchange="this.form.submit()">
                </form>
            </div>
            
            <div style="font-weight: bold;">
                ₪{{ item.product.price|floatformat:2 }}
            </div>
            
            <div>
                <a href="{% url 'shop:remove_from_cart' item.id %}" class="btn btn-danger" onclick="return confirm('האם אתה בטוח שברצונך להסיר את המוצר?')">הסר</a>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div style="text-align: center; margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 8px;">
        <h3>סה"כ: ₪{{ total|floatformat:2 }}</h3>
        <a href="{% url 'shop:product_list' %}" class="btn" style="background: #6c757d; margin-left: 10px;">המשך קניות</a>
        <button class="btn" style="background: #28a745; font-size: 18px;">בצע הזמנה</button>
    </div>
{% else %}
    <div style="text-align: center; padding: 60px; color: #666;">
        <h3>העגלה ריקה</h3>
        <p>לא הוספת מוצרים לעגלה עדיין</p>
        <a href="{% url 'shop:product_list' %}" class="btn">התחל לקנות</a>
    </div>
{% endif %}
{% endblock %}